## 1\. Conceito de Navegação

O Jetpack Compose Navigation funciona de forma **declarativa**, tratando as telas como destinos em um grafo de rotas (como URLs em um navegador).

| Componente | Papel Arquitetural | Como Aplicamos no Projeto |
| :--- | :--- | :--- |
| **`NavController`** | O *motor* que gerencia a pilha de rotas (Back Stack). | Chamamos **`navController.navigate("rota")`** na `HomeScreen` para solicitar a transição. |
| **`NavHost`** | O *container* que renderiza a tela Composable atual. | Definido no **`NavGraph.kt`**, ele escuta o `NavController` e exibe o Composable mapeado para a rota ativa. |
| **Rotas (URI)** | A *chave* única que identifica uma tela e transporta argumentos. | Definimos o padrão **`configuracoes/{nome}/{idade}`**. Os dados (`nome`, `idade`) são serializados diretamente na URL. |
| **`navArgument`** | Define o *contrato* e o *tipo de dado* que a rota espera. | No `NavGraph.kt`, especificamos que o argumento `aluno_idade` deve ser do tipo **`NavType.IntType`**. |
| **Extração de Dados** | A forma como a tela recebe os argumentos. | O `NavGraph.kt` intercepta os argumentos da rota e usa-os para **reconstruir o objeto `Aluno`** antes de injetá-lo no `ConfiguracoesScreen`. |

-----

## 2\. Estrutura do Projeto e Configuração

### Estrutura de Pacotes

```
com.fatec.navigation
├── data/                    
│   └── Aluno.kt             // Modelo de Dados
├── ui/                      
│   ├── navigation/          
│   │   └── NavGraph.kt      // Grafo de Rotas e Lógica de Navegação
│   ├── screens/             
│   │   └── *.[ScreenName].kt* // Telas da UI
└── MainActivity.kt          
```

### Dependência (app/build.gradle.kts)

```kotlin
dependencies {
    // Versão 2.9.5 usada como base
    implementation("androidx.navigation:navigation-compose:2.9.5") 
}
```

-----

## 3\. Código Final

### 3.1. `data/Aluno.kt`

```kotlin
package com.fatec.navigationbase.data

data class Aluno(
    val nome: String,
    val idade: Int
)
```

### 3.2. `ui/navigation/NavGraph.kt`

O coração da navegação, onde definimos os contratos das rotas e extraímos os argumentos.

```kotlin
package com.fatec.navigation.ui.navigation

import androidx.compose.runtime.Composable
import androidx.navigation.NavType
import androidx.navigation.compose.NavHost
import androidx.navigation.compose.composable
import androidx.navigation.compose.rememberNavController
import androidx.navigation.navArgument
import com.fatec.navigation.data.Aluno
import com.fatec.navigation.ui.screens.ConfiguracoesScreen
import com.fatec.navigation.ui.screens.HomeScreen
import com.fatec.navigation.ui.screens.PerfilScreen

object Routes {
    const val HOME = "home"
    const val PERFIL = "perfil"
    const val CONFIGURACOES = "configuracoes"

    const val ARG_SAUDACAO = "saudacao"
    const val ARG_ALUNO_NOME = "aluno_nome"
    const val ARG_ALUNO_IDADE = "aluno_idade"

    // Rota com Argumento Opcional
    const val PERFIL_COMPLETO = "$PERFIL?$ARG_SAUDACAO={$ARG_SAUDACAO}"

    // Rota com Argumentos Obrigatórios via URI
    const val CONFIGURACOES_COMPLETO = "$CONFIGURACOES/{$ARG_ALUNO_NOME}/{$ARG_ALUNO_IDADE}"

    fun buildPerfilRoute(saudacao: String? = null): String {
        return if (saudacao != null) {
            "$PERFIL?$ARG_SAUDACAO=$saudacao" } else { PERFIL }
    }

    /**
     * Constrói a rota de Configurações, injetando os valores na URI.
     */
    fun buildConfiguracoesRoute(nome: String, idade: Int): String {
        return "$CONFIGURACOES/$nome/$idade"
    }
}

@Composable
fun AppNavGraph() {
    val navController = rememberNavController()

    NavHost(
        navController = navController,
        startDestination = Routes.HOME
    ) {
        // --- 1. Rota: HOME ---
        composable(route = Routes.HOME) {
            HomeScreen(navController = navController)
        }

        // --- 2. Rota: PERFIL (Argumento Opcional) ---
        composable(
            route = Routes.PERFIL_COMPLETO,
            arguments = listOf(
                navArgument(Routes.ARG_SAUDACAO) {
                    type = NavType.StringType
                    nullable = true
                    defaultValue = "Olá, bem-vindo(a)!"
                },

            )
        ) { backStackEntry ->
            val saudacao = backStackEntry.arguments?.getString(Routes.ARG_SAUDACAO)
            PerfilScreen(navController = navController, saudacao = saudacao ?: "Erro na Saudação")
        }

        // --- 3. Rota: CONFIGURAÇÕES (Argumentos Obrigatórios via URI) ---
        composable(
            route = Routes.CONFIGURACOES_COMPLETO,
            arguments = listOf(
                navArgument(Routes.ARG_ALUNO_NOME) { type = NavType.StringType },
                navArgument(Routes.ARG_ALUNO_IDADE) { type = NavType.IntType }
            )
        ) { backStackEntry ->
            // Recebe os dados da URI
            val nome = backStackEntry.arguments?.getString(Routes.ARG_ALUNO_NOME)
            val idade = backStackEntry.arguments?.getInt(Routes.ARG_ALUNO_IDADE)

            // Reconstroi o objeto Aluno para injetar na tela
            val aluno = if (nome != null && idade != null) Aluno(nome, idade) else Aluno("Erro de Rota", 0)

            ConfiguracoesScreen(aluno = aluno)
        }
    }
}
```

### 3.3. `ui/screens/HomeScreen.kt`

Responsável por montar e executar o comando de navegação.

```kotlin
package com.fatec.navigation.ui.screens

import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.material3.Button
import androidx.compose.material3.Card
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.OutlinedTextField
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.text.input.KeyboardType
import androidx.compose.ui.unit.dp
import androidx.navigation.NavController
import com.fatec.navigation.ui.navigation.Routes

@Composable
fun HomeScreen(
    navController: NavController
) {
    var saudacao by remember { mutableStateOf("") }
    var nome by remember { mutableStateOf("Yuri") }
    var idadeText by remember { mutableStateOf("25") }
    val isDataValid = nome.isNotBlank() &&
            idadeText.toIntOrNull() != null

    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(16.dp),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "HOME: Opções de Navegação",
            style = MaterialTheme.typography.headlineMedium
        )

        // Seção para o Argumento Opcional
        Card(
            modifier = Modifier.fillMaxWidth()
        ) {
            Column(
                modifier = Modifier
                    .padding(16.dp)
                    .fillMaxWidth()
            ) {
                Text(
                    "Perfil: Envio de Argumento Opcional",
                    style = MaterialTheme.typography.titleMedium
                )
                OutlinedTextField(
                    value = saudacao,
                    onValueChange = { saudacao = it },
                    label = { Text("Saudação Opcional") },
                    modifier = Modifier.fillMaxWidth()
                )
                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceEvenly
                ) {
                    Button(
                        onClick = {
                            navController.navigate(Routes.PERFIL)
                        }
                    ) { Text("Perfil Padrão") }
                    Button(
                        onClick = {
                            val route = Routes.buildPerfilRoute(
                                saudacao.ifBlank { null }
                            )
                            navController.navigate(route)
                        },
                        enabled = saudacao.isNotBlank()
                    ) { Text("Perfil Customizado") }
                }
            }
        }

        Card(modifier = Modifier.fillMaxWidth()) {
            Column(
                modifier = Modifier
                    .padding(16.dp)
                    .fillMaxWidth()
            ) {
                Text(
                    "Configurações: Envio de Dados Primitivos via URI",
                    style = MaterialTheme.typography.titleMedium
                )
                OutlinedTextField(
                    value = nome,
                    onValueChange = { nome = it },
                    label = { Text("Nome") })
                OutlinedTextField(
                    value = idadeText,
                    onValueChange = {
                        idadeText = it.filter { char ->
                            char.isDigit()
                        }
                    },
                    label = { Text("Idade") },
                    keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number)
                )
                Button(
                    onClick = {
                        if (isDataValid) {
                            val nomeAluno = nome
                            val idadeAluno = idadeText.toInt()

                            //  Monta a URI completa e navega
                            val route = Routes.buildConfiguracoesRoute(
                                nomeAluno,
                                idadeAluno
                            )
                            navController.navigate(route)
                        }
                    },
                    enabled = isDataValid
                ) { Text("Configurações (Enviar URI)") }
            }
        }
    }
}
```

### 3.4. `ui/screens/PerfilScreen.kt`

```kotlin
package com.fatec.navigation.ui.screens

import androidx.compose.foundation.layout.*
import androidx.compose.material3.*
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.unit.dp
import androidx.navigation.NavController


@Composable
fun PerfilScreen(
    navController: NavController,
    saudacao: String
) {
    val isDefault = saudacao == "Olá, bem-vindo(a)!"
    Column(
        modifier = Modifier.fillMaxSize().padding(32.dp),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(text = "PERFIL DO USUÁRIO", style = MaterialTheme.typography.headlineLarge)
        Spacer(modifier = Modifier.height(40.dp))

        Text(
            text = saudacao,
            style = MaterialTheme.typography.titleLarge,
            color = if (isDefault) Color.Gray else MaterialTheme.colorScheme.primary
        )
        Text(
            text = if (isDefault) "(Argumento Omitido: Valor Padrão)" else "(Argumento Enviado: Valor Customizado)",
            style = MaterialTheme.typography.bodyLarge
        )
        Spacer(modifier = Modifier.height(40.dp))
        Button(onClick = {
            navController.popBackStack()
        }) {
            Text("Voltar para Home")
        }
    }
}
```

### 3.5. `ui/screens/ConfiguracoesScreen.kt`

```kotlin
package com.fatec.navigation.ui.screens

import androidx.compose.foundation.layout.*
import androidx.compose.material3.*
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp
import com.fatec.navigation.data.Aluno

@Composable
fun ConfiguracoesScreen(aluno: Aluno) {
    Column(
        modifier = Modifier.fillMaxSize().padding(32.dp),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(text = "CONFIGURAÇÕES", style = MaterialTheme.typography.headlineLarge)
        Spacer(modifier = Modifier.height(40.dp))
        Text(
            text = "Objeto Aluno Recebido:",
            style = MaterialTheme.typography.titleMedium
        )
        Spacer(modifier = Modifier.height(8.dp))
        // Renderização dos dados do objeto serializado
        Text(
            text = "Nome: ${aluno.nome}",
            style = MaterialTheme.typography.headlineSmall,
            color = MaterialTheme.colorScheme.tertiary
        )
        Text(
            text = "Idade: ${aluno.idade} anos",
            style = MaterialTheme.typography.headlineSmall
        )
    }
}
```

### 3.6. `MainActivity.kt`

```kotlin
package com.fatec.navigation

import android.annotation.SuppressLint
import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.activity.enableEdgeToEdge
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.padding
import androidx.compose.material3.Scaffold
import androidx.compose.ui.Modifier
import com.fatec.navigation.ui.navigation.AppNavGraph
import com.fatec.navigation.ui.theme.NavigationTheme

@SuppressLint("UnusedMaterial3ScaffoldPaddingParameter")
class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContent {
            NavigationTheme {
                Scaffold(modifier = Modifier.fillMaxSize()) {
                    innerPadding ->
                    Column(
                        modifier = Modifier
                            .padding(innerPadding)
                    ) {
                        AppNavGraph()
                    }
                }
            }
        }
    }
}
```